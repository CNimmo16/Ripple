(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],p=0,f=[];p<o.length;p++)s=o[p],r[s]&&f.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/<Ripple>/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},1550:function(t,e,a){"use strict";var n=a("968a"),r=a.n(n);r.a},3145:function(t,e,a){t.exports=a.p+"img/damn.dba861cc.jpeg"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("PlayerView")],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player-view",on:{mousemove:function(e){return t.getCurrPosition(e)}}},[a("div",{staticClass:"player"},t._l(t.tracks,function(e,n){return a("TrackCard",{key:n,attrs:{track:e,position:t.currPosition[n],current:t.current,trackChanging:t.trackChanging},on:{grow:function(e){return t.grow(n)},shrink:function(e){return t.shrink(n)},"skip-to":function(e){return t.skipTo(n)},"play-next":function(e){return t.playNext(n)},"demo-alert":function(e){return t.fireDemoAlert()}}})}),1),a("transition",{attrs:{name:"fade"}},[t.demoAlertActive?a("div",{staticClass:"demo-alert"},[t._v("Woah, this is just a demo application! There is no suggested song algorithm, so only 3 playable tracks have been included for demonstration purposes.")]):t._e()])],1)},o=[],c=a("768b"),l=(a("ac6a"),a("ffc1"),a("15d3")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"track-card",class:{current:t.$vnode.key===t.current,previous:t.$vnode.key<t.current,next:t.$vnode.key>t.current},on:{click:function(e){return e.stopPropagation(),t.handleClick()},mouseenter:function(e){return e.stopPropagation(),t.$emit("grow",t.$vnode.key)},mouseleave:function(e){return e.stopPropagation(),t.$emit("shrink",t.$vnode.key)}}},[n("article",[n("div",{staticClass:"track-header",class:{active:t.$vnode.key===t.current&&!1===t.trackChanging}},[t._v("\n            Now Playing\n        ")]),n("div",{staticClass:"track-header",class:{active:t.$vnode.key===t.current+1&&!1===t.trackChanging}},[t._v("\n            Up next\n        ")]),n("img",{staticClass:"cover",attrs:{src:t.track.cover}}),n("div",{staticClass:"artists"},[n("span",{staticClass:"main"},[t._v(t._s(t.track.artists[0]))]),t.track.artists.length>1?n("span",{staticClass:"features"},[t._v("\n                feat. \n                "),t._l(t.track.artists.slice(1),function(e,a){return n("span",{key:a},[t._v(t._s(e))])})],2):t._e()]),n("h2",{staticClass:"title"},[t._v(t._s(t.track.title))]),n("div",{staticClass:"album"},[n("img",{attrs:{src:a("e271")}}),n("h3",[t._v(t._s(t.track.album))])]),t.position?n("div",{staticClass:"overlay",style:{opacity:2*t.position.opacity}}):t._e(),n("Controls",{attrs:{active:t.$vnode.key===t.current&&!1===t.trackChanging}}),t.$vnode.key<t.current?n("button",{staticClass:"return button"},[t._v("\n            Click to return to track\n        ")]):t._e(),t.$vnode.key===t.current+1?n("button",{staticClass:"next"},[t._v("\n            Click to skip to track\n        ")]):t._e(),t.$vnode.key>t.current+1?n("button",{staticClass:"next button"},[t._v("\n            Click to play next\n        ")]):t._e()],1)])},p=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"controls",class:{active:t.active},on:{mousemove:function(t){t.stopPropagation()}}},[n("div",{staticClass:"play-controls"},[t._m(0),n("div",{staticClass:"previous icon"},[n("img",{attrs:{src:a("7383")},on:{click:function(e){return t.previous()}}})]),n("div",{staticClass:"play icon",on:{click:function(e){return t.togglePlay(e)}}},[t.isPaused?n("img",{attrs:{src:a("b878")}}):n("img",{attrs:{src:a("adc7")}})]),n("div",{staticClass:"next icon",on:{click:function(e){return t.next()}}},[n("img",{attrs:{src:a("c91a")}})]),t._m(1)]),n("ProgressBar")],1)},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loop icon"},[n("img",{attrs:{src:a("911a")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shuffle icon"},[n("img",{attrs:{src:a("df78")}})])}],h=(a("96cf"),a("3b8d")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar",on:{mousemove:function(e){return e.stopPropagation(),t.getSeeking(e)},click:function(e){return t.setSeeking(e)}}},[a("div",{staticClass:"fill"}),a("div",{staticClass:"ghost",style:{width:t.seekPercent}},[a("div",{staticClass:"cursor"})])])])},y=[],v={name:"ProgressBar",data:function(){return{position:"0:00",duration:"3:35",percentRaw:0,seekPercentRaw:0}},computed:{percent:function(){return(100*this.seekPercentRaw).toFixed(2)+"%"},seekPercent:function(){return(100*this.seekPercentRaw).toFixed(2)+"%"}},mounted:function(){this.$gsap.to(window.document.getElementsByClassName("fill")[0],170,{scaleX:350,ease:"linear"})},methods:{getSeeking:function(t){var e=window.document.getElementsByClassName("progress-bar")[0].getBoundingClientRect().left,a=t.clientX-e,n=window.document.getElementsByClassName("progress-bar")[0].clientWidth;this.seekPercentRaw=a/n}}},g=v,k=(a("92ec"),a("2877")),b=Object(k["a"])(g,m,y,!1,null,"dc901546",null),w=b.exports,P={name:"Controls",data:function(){return{isPaused:!0,playerID:null}},props:["active"],computed:{playlist:function(){return this.$store.state.playlist}},components:{ProgressBar:w},mounted:function(){var t=this;this.$loadScript("https://sdk.scdn.co/spotify-player.js").then(function(){t.initiatePlayer(),window.setTimeout(t.playFromState,4e3)}).catch(function(){})},methods:{resume:function(){var t=this;console.log("playing"),this.spotifyPlayer.resume().then(function(){t.isPaused=!1})},pause:function(){var t=this;console.log("pausing"),this.spotifyPlayer.pause().then(function(){window.clearInterval(window.int),t.isPaused=!0})},togglePlay:function(){this.isPaused?this.resume():this.pause()},playFromState:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(e,a){var n,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n="3qhdxKqksjkX6l8NDXz0as",this.$spotify.getRecommendations({seed_tracks:["6gRbkI6s0M7zTE9uhRZUjV"]}).then(function(t){var e=["spotify:track:6gRbkI6s0M7zTE9uhRZUjV"];r.playSpotify(n,e)});case 2:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),playSpotify:function(t,e){var a=this,n={uris:e};this.$spotify.getMyCurrentPlaybackState(function(e,r){e||(r.device&&r.device.id===a.playerID?(n.device_id=a.playerID,a.spotifyPlayWithAPI(n,t)):(n.device_id=a.playerID,a.transferSpotifyPlaybackToDropt(n,t)))})},spotifyPlayWithAPI:function(t,e){var a=this;this.$spotify.play(t).then(function(){a.isPaused=!1})},transferSpotifyPlaybackToDropt:function(t,e){var a=this;this.$spotify.transferMyPlayback([this.playerID]).then(function(){t&&window.setTimeout(function(){a.spotifyPlayWithAPI(t,e)},500)})},waitForSpotifyWebPlaybackSDKToLoad:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){window.Spotify?t(window.Spotify):window.onSpotifyWebPlaybackSDKReady=function(){t(window.Spotify)}}));case 1:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),initiatePlayer:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.waitForSpotifyWebPlaybackSDKToLoad();case 2:e=t.sent,a=e.Player,this.spotifyPlayer=new a({name:"Ripple",volume:1,getOAuthToken:function(t){t(n.$store.state.spotifyToken)}}),this.spotifyPlayer.addListener("player_state_changed",function(t){t||(n.$refs["playbackTransferredModal"].open(),n.playing=null,window.clearInterval(window.int),n.positionRaw=0,n.durationRaw=0)}),this.spotifyPlayer.addListener("ready",function(t){var e=t.device_id;console.log("Ready with Device Id: ",e),n.playerID=e}),this.spotifyPlayer.connect();case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},C=P,_=(a("1550"),Object(k["a"])(C,f,d,!1,null,"32f50e7b",null)),Y=_.exports,x={name:"TrackCard",props:["track","position","current","trackChanging"],components:{Controls:Y},watch:{position:function(t){var e={},a=window.document.getElementsByClassName("player-view")[0].getBoundingClientRect(),n=window.document.getElementsByClassName("track-card")[0].clientHeight;if(t.translateX){var r=window.document.getElementsByClassName("track-card")[0].clientWidth,i=a.width-r;t.translateX;e.x=t.translateX*i/100-r/2}else e.x=0;if(e.y=t.translateY?t.translateY*a.height/100-n/2:n/2*-1,e.z=t.translateZ?t.translateZ:2e3,t.scale){var s=t.scale*((a.height+913)/1850);s*n*1.3>a.height-20&&(s=(a.height-20)/(1.3*n)),e.scale=s}else e.scale=1;e.rotationY=t.rotateY?t.rotateY:0,this.$gsap.to(this.$el,.5,{css:e})}},methods:{handleClick:function(){this.$vnode.key>=4&&this.$vnode.key<=6?this.$vnode.key<=this.current+1?this.$emit("skip-to",this.$vnode.key):this.$emit("play-next",this.$vnode.key):this.$emit("demo-alert")}}},$=x,S=(a("70f0"),Object(k["a"])($,u,p,!1,null,null,null)),Z=S.exports,R={name:"PlayerView",components:{TrackCard:Z},mounted:function(){this.$nextTick(function(){var t=this;window.addEventListener("resize",function(){t.getCurrPosition()})}),this.getCurrPosition()},data:function(){return{currPosition:[{rotateY:-23,translateZ:1e3},{rotateY:-17,translateZ:1100},{rotateY:-8,translateZ:1200},{rotateY:0,translateZ:1300},{rotateY:7,translateZ:1300},{rotateY:7,translateZ:1300},{rotateY:7,translateZ:1300},{rotateY:7,translateZ:1300}],hovered:null,trackChanging:!1,demoAlertActive:!1,positions:{mouseLeft:[{rotateY:-25,translateZ:1600,translateX:-62,scale:.38,opacity:.55},{rotateY:-20,translateZ:1680,translateX:-59.5,scale:.68,opacity:.55},{rotateY:-15,translateZ:1760,translateX:-45.9,scale:.83,opacity:.25},{rotateY:-9,translateZ:1840,translateX:-31.1,scale:.93,opacity:.15},{rotateY:-4,translateZ:1920,translateX:-11.7,scale:.97,opacity:.07},{rotateY:0,translateZ:2e3,translateX:7.4,scale:1,opacity:0},{rotateY:7,translateZ:1800,translateX:30.4,translateY:0,scale:.81,opacity:.17},{rotateY:7,translateZ:1600,translateX:45.3,translateY:-25.2,scale:.8,opacity:.4},{rotateY:7,translateZ:1400,translateX:54.5,translateY:13.1,scale:.79,opacity:.66},{rotateY:7,translateZ:1200,translateX:65.8,translateY:-8.8,scale:.77,opacity:.8},{rotateY:10,translateZ:1100,translateX:63,scale:.38,opacity:.9}],mouseRight:[{rotateY:-20,translateZ:1e3,translateX:-62,scale:.58,opacity:.45},{rotateY:-20,translateZ:1200,translateX:-60.9,scale:.68,opacity:.45},{rotateY:-37,translateZ:1400,translateX:-55,scale:.75,opacity:.66},{rotateY:-25,translateZ:1600,translateX:-43.7,scale:.82,opacity:.4},{rotateY:-13,translateZ:1800,translateX:-28.2,scale:.93,opacity:.17},{rotateY:0,translateZ:2e3,translateX:-9.2,scale:1,opacity:0},{rotateY:3,translateZ:1920,translateX:13.5,translateY:0,scale:.9,opacity:.17},{rotateY:2,translateZ:1840,translateX:35.8,translateY:-25.2,scale:.8,opacity:.07},{rotateY:2,translateZ:1760,translateX:36.5,translateY:19.7,scale:.73,opacity:.07},{rotateY:1,translateZ:1680,translateX:58.1,translateY:2.2,scale:.72,opacity:.07},{rotateY:3,translateZ:1600,translateX:62,scale:.4,opacity:.9}]},hoverPositions:[{r:9,t:10},{r:9,t:10},{r:7,t:6},{r:6,t:3},{r:3,t:-1},{r:0,t:0},{r:-3,t:0},{r:-4,t:-4},{r:-5,t:-5},{r:-5,t:-10},{r:-5,t:-10}],current:5,tracks:[{cover:a("6eef"),artists:["Skepta"],title:"Bullet From A Gun",type:"album",album:"Ignorance is Bliss"},{cover:a("f9f9"),artists:["Kendrick Lamar"],title:"A.D.H.D.",type:"album",album:"Section.80"},{cover:a("6eef"),artists:["Skepta"],title:"Bullet From A Gun",type:"album",album:"Ignorance is Bliss"},{cover:a("8966"),artists:["-M-"],title:"Logique écho",type:"album",album:"Lettre infinie"},{cover:a("cf2a"),artists:["Jay Critch"],title:"Don't @ Me",type:"single",album:"Don't @ Me"},{cover:a("6eef"),artists:["Skepta","Nafe Smallz"],title:"Greaze Mode",type:"album",album:"Ignorance is Bliss"},{cover:a("3145"),artists:["Kendrick Lamar","Rihanna"],title:"LOYALTY. FEAT. RIHANNA.",type:"album",album:"DAMN."},{cover:a("9805"),artists:["Flipp Dinero"],title:"Leave Me Alone",type:"single",album:"Leave Me Alone"},{cover:a("f9f9"),artists:["Kendrick Lamar"],title:"Poe Mans Dreams (His Vice)",type:"album",album:"Section.80"},{cover:a("8966"),artists:["-M-"],title:"Superchérie",type:"album",album:"Lettre infinie"},{cover:a("6eef"),artists:["Skepta"],title:"Bullets for fun",type:"album",album:"Ignorance is Bliss"}]}},methods:{fireDemoAlert:function(){var t=this;!1===this.demoAlertActive&&(this.demoAlertActive=!0,window.setTimeout(function(){t.demoAlertActive=!1},5e3))},grow:function(t){t!==this.current&&(this.hovered=t),this.getCurrPosition(null)},shrink:function(){this.hovered=null,this.getCurrPosition()},playNext:function(t){this.tracks.splice(this.current+1,0,this.tracks.splice(t,1)[0])},skipTo:function(t){var e=this;t!==this.current&&(this.current=t,this.trackChanging=!0,this.getCurrPosition(),window.setTimeout(function(){e.trackChanging=!1},500))},getCurrPosition:Object(l["a"])(100,function(t){var e=window.document.getElementsByClassName("player-view")[0].getBoundingClientRect(),a=t?(t.clientX-e.x)/e.width:.5,n=[],r=5-this.current,i=null;i=r>0?{mouseLeft:this.positions.mouseLeft.slice(r),mouseRight:this.positions.mouseRight.slice(r)}:r<0?{mouseLeft:[{rotateY:-25,translateZ:1400,translateX:-62,scale:.38,opacity:.55}].concat(this.positions.mouseLeft).concat([{}]),mouseRight:[{rotateY:-25,translateZ:600,translateX:-62,scale:.38,opacity:.55}].concat(this.positions.mouseRight).concat([{}])}:this.positions;for(var s=0;s<i.mouseLeft.length;s++){for(var o={},l=0,u=Object.entries(i.mouseLeft[s]);l<u.length;l++){var p=Object(c["a"])(u[l],1),f=p[0],d=i.mouseLeft[s][f],h=i.mouseRight[s][f];o[f]=d+(h-d)*a}n.push(o)}if("number"===typeof this.hovered&&!1===this.trackChanging&&this.hovered!==this.current){f=this.hovered;var m=[.95,.97,.98,.98,.98,.98];n[f].scale=n[f].scale*m[0];var y=2020-n[f].translateZ;console.log(y),n[f].translateZ=2020,n[f].rotateY+=this.hoverPositions[f-(this.current-5)].r,n[f].translateX+=this.hoverPositions[f-(this.current-5)].t;for(var v=1;v<n.length;v++)f-v>=5&&f-v!==this.current&&(n[f-v].scale=n[f-v].scale*m[v]),f+v<n.length-6&&f+v!==this.current&&(n[f+v].scale=n[f+v].scale*m[v])}this.currPosition=n})}},A=R,X=(a("70bd"),Object(k["a"])(A,s,o,!1,null,null,null)),L=X.exports,T={name:"app",components:{PlayerView:L},mounted:function(){if("/play"!==window.location.pathname.slice(0,9)){var t="playlist-read-private playlist-read-collaborative playlist-modify-private user-read-playback-state user-modify-playback-state streaming user-read-birthdate user-read-email user-read-private user-library-read";window.location.href="https://accounts.spotify.com/authorize?client_id=a1e165ead0e74ae299f926b4c798fe33&scope="+encodeURIComponent(t)+"&redirect_uri="+window.location.origin+"/play&response_type=token"}else{var e=window.location.hash.substr(1),a=e.substr(e.indexOf("=")+1),n=a.substr(0,a.indexOf("&"));this.$spotify.setAccessToken(n),this.$store.commit("setToken",n)}}},j=T,D=(a("034f"),Object(k["a"])(j,r,i,!1,null,null,null)),M=D.exports,O=a("2f62"),B=a("67b0"),I=a("109c");n["a"].use(O["a"]);var E=new O["a"].Store({state:{spotifyToken:null,playlist:[{cover:a("6eef"),artists:["Skepta"],title:"Bullet From A Gun",type:"album",album:"Ignorance is Bliss"},{cover:a("8966"),artists:["-M-"],title:"Logique écho",type:"album",album:"Lettre infinie"},{cover:a("cf2a"),artists:["Jay Critch"],title:"Don't @ Me",type:"single",album:"Don't @ Me"},{cover:a("6eef"),artists:["Skepta","Nafe Smallz"],title:"Greaze Mode",type:"album",album:"Ignorance is Bliss"},{cover:a("3145"),artists:["Kendrick Lamar","Rihanna"],title:"LOYALTY. FEAT. RIHANNA.",type:"album",album:"DAMN."},{cover:a("9805"),artists:["Flipp Dinero"],title:"Leave Me Alone",type:"single",album:"Leave Me Alone"},{cover:a("f9f9"),artists:["Kendrick Lamar"],title:"Poe Mans Dreams (His Vice)",type:"album",album:"Section.80"},{cover:a("8966"),artists:["-M-"],title:"Superchérie",type:"album",album:"Lettre infinie"}]},mutations:{setToken:function(t,e){t.spotifyToken=e}},actions:{}});n["a"].config.productionTip=!1,n["a"].use(O["a"]),n["a"].use(B["a"]);var N=a("be8d"),F=new N;Object.defineProperty(n["a"].prototype,"$spotify",{value:F}),Object.defineProperty(n["a"].prototype,"$gsap",{value:I["a"]}),new n["a"]({store:E,render:function(t){return t(M)}}).$mount("#app")},"64a9":function(t,e,a){},"6eef":function(t,e,a){t.exports=a.p+"img/skepta.d9c7fb94.jpg"},"70bd":function(t,e,a){"use strict";var n=a("eba4"),r=a.n(n);r.a},"70f0":function(t,e,a){"use strict";var n=a("caf3"),r=a.n(n);r.a},7383:function(t,e,a){t.exports=a.p+"img/previous.a7db2e9f.svg"},8966:function(t,e,a){t.exports=a.p+"img/logique.4ac21b30.jpg"},"89ff":function(t,e,a){},"911a":function(t,e,a){t.exports=a.p+"img/repeat-one.b95262cd.svg"},"92ec":function(t,e,a){"use strict";var n=a("89ff"),r=a.n(n);r.a},"968a":function(t,e,a){},9805:function(t,e,a){t.exports=a.p+"img/leaveme.8d0fab92.png"},adc7:function(t,e,a){t.exports=a.p+"img/pause.cd7da876.svg"},b878:function(t,e,a){t.exports=a.p+"img/play.0afc49f2.svg"},c91a:function(t,e,a){t.exports=a.p+"img/next.848b60a2.svg"},caf3:function(t,e,a){},cf2a:function(t,e,a){t.exports=a.p+"img/dont@me.e8f139a1.jpg"},df78:function(t,e,a){t.exports=a.p+"img/shuffle.664110fe.svg"},e271:function(t,e,a){t.exports=a.p+"img/album.8eefafee.svg"},eba4:function(t,e,a){},f9f9:function(t,e,a){t.exports=a.p+"img/section80.25d9723e.jpg"}});
//# sourceMappingURL=app.e522cb1e.js.map